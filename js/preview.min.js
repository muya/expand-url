function onPreviewLoad(e){$.ajax({type:"POST",url:Config.expand_url_api,data:{shortUrl:e.clickedUrl},success:function(e){if($("#translateToImg").remove(),void 0===e.status)$("#resolvedUrl").css("display","none"),$("#unResolvedUrl").css("display","block"),$("#unResolvedUrlText").text(chrome.i18n.getMessage("unableToResolveUrlNoConn"));else if(1===e.status){var a=e.data.expandedUrl;$("#resolvedUrl").text(a),$("#openExpandedURL").attr("href",a).css("display","initial")}else console.error("received non-success status | status: "+e.data.status+" | message: "+e.data.message),$("#resolvedUrl").css("display","none"),$("#unResolvedUrl").css("display","block"),$("#unResolvedUrlText").text(chrome.i18n.getMessage("unableToResolveUrl"))}}),$("#originalUrlDiv").css("display","block"),$("#shortenedUrl").text(e.clickedUrl),$("#translateToImg").css("display","block"),animateLoadingImage()}function animateLoadingImage(){$.when($("#translateToImg").delay(200).animate({opacity:"1"},500,"linear"),$("#translateToImg").delay(400).animate({opacity:"0"},500,"linear")).then(animateLoadingImage)}chrome.runtime.onMessage.addListener(function(e){return $("#closePreviewTab").attr("data-opened-tab-id",e.openedTabID).attr("data-orig-tab-id",e.originalTabID),void 0!==e.error?void displayUserAlert("error",e.error):void onPreviewLoad(e)}),$(function(){$("#closePreviewTab").click(function(){chrome.tabs.update(parseInt($(this).attr("data-orig-tab-id"),10),{active:!0}),chrome.tabs.remove(parseInt($(this).attr("data-opened-tab-id"),10))})}),$(function(){$("[data-i18n]").each(function(){var e=$(this),a=e.data("i18n");e.html("versionText"===a?chrome.i18n.getMessage(a,[chrome.i18n.getMessage("extName"),getVersion()]):chrome.i18n.getMessage(a))})});